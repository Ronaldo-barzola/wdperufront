var CONDICIONES=CONDICIONES||{};CONDICIONES.condicion=function(i){"use strict";var n=i("table#tb_condiciones"),e=function(){i("#btn_search").on("click",function(){n.bootstrapTable("refresh")})},t=function(){var e=i.extend(!0,{},i.extend(!0,{},MPC.config).bootstrapTable);e.idField="ID_CONDICION",e.search=!1,e.url=Request.BaseUrl+"/mantenimiento/condiciones/list",e.queryParams=function(n){return n.filter_type=i("#cbo_filter_type").val(),n.filter_value=i("#txt_filter_value").val(),n.filter_year=i("#txt_filter_year").val(),n},e.columns=[{field:"INDICADOR_CONDICION",title:"INDICADOR",align:"center",sortable:!0,width:"50px"},{field:"DESCRIPCION_CONDICION",title:"DESCRIPCIÃ“N",align:"center",sortable:!0,width:"*"},{field:"action",title:" ACCIONES",align:"center",width:"100px",formatter:o,events:{"click .edit":a}}],n.bootstrapTable(e)},o=function(i,n){var e='<button id="btn-edit-'+n.ID_CONDICION+'" class="btn-actions edit btn btn-xs btn-complete" data-id="'+n.ID_CONDICION+'" title="Editar Registro"><i class="fa fa-edit"></i></button>&nbsp;';return e},s=function(){i("#btn_new_condicion").on("click",function(){i.post(Request.BaseUrl+"/mantenimiento/condiciones/condicion",{},function(i){bootbox.dialog({closeButton:!1,message:i.layer}),c()},"json")})},a=function(n,e,t){i.post(Request.BaseUrl+"/mantenimiento/condiciones/condicion",{id:t.ID_CONDICION},function(i){bootbox.dialog({closeButton:!1,message:i.layer}),c()},"json")},c=function(){r(),i("#btn_close").on("click",function(){bootbox.hideAll()}),i("#txt_condicion_indicador").on("keyup",function(){i.post(Request.BaseUrl+"/mantenimiento/condiciones/validateindicador",{name:i("#txt_condicion_indicador").val(),id:i("#txt_condicion_id").val()},function(n){n.STATE?i("#lb_indicador_error").removeClass("hidden"):i("#lb_indicador_error").addClass("hidden")},"json")}),i("#txt_condicion_descripcion").on("keyup",function(){i.post(Request.BaseUrl+"/mantenimiento/condiciones/validatedescripcion",{name:i("#txt_condicion_descripcion").val(),id:i("#txt_condicion_id").val()},function(n){n.STATE?i("#lb_descripcion_error").removeClass("hidden"):i("#lb_descripcion_error").addClass("hidden")},"json")}),i("#frm_condicion").on("submit",function(){return i("#lb_indicador_error").hasClass("hidden")&&i("#lb_descripcion_error").hasClass("hidden")?(i("#dv_save").html('Guardando... por favor espere<br><img class="image-responsive-height demo-mw-50" src="/ggdelc/themes/01//img/demo/progress.svg" alt="Progress">'),i.post(Request.BaseUrl+"/mantenimiento/condiciones/save",i("#frm_condicion").serialize(),function(e){if(e.STATE){n.bootstrapTable("refresh"),bootbox.hideAll();var t=[];t.message='<div class="text-center"><i class="fa fa-check"></i> Datos guardados</div>',t.style="flip",t.position="top",t.type="success",t.showClose=!0,i("body").pgNotification(t).show()}else{var t=[];t.message='<div class="text-center"><i class="fa fa-warning"></i> No se pudieron guardar los datos</div>',t.style="flip",t.position="top",t.type="danger",t.showClose=!0,i(".modal-content").pgNotification(t).show(),i("#dv_save").html('<button type="button" class="btn btn-danger" id="btn_close"><i class="fa fa-close"></i> Cancelar</button><button type="submit" class="btn btn-info" id="btn_save"><i class="fa fa-save"></i> Guardar</button>')}},"json"),!1):!1})},r=function(){function n(i){var n=i.which?i.which:event.keyCode;return 45==n||32==n?!0:48>n||n>57?!1:!0}function e(i){var n=i.which?i.which:event.keyCode;return 45==n||32==n||46==n?!0:48>n||n>57?!1:!0}i(".mayusculas").keyup(function(){i(this).val(i(this).val().toUpperCase())}),i(".validar_numeros").keypress(function(i){return n(i,this)}),i(".validar_decimales").keypress(function(i){return e(i,this)})};return{init:function(){t(),e(),s()}}}(window.jQuery),function(){CONDICIONES.condicion.init()}(window.jQuery);