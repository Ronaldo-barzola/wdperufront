var INVENTARIO=INVENTARIO||{},urlController=Request.BaseUrl+"/"+Request.UrlHash.m;INVENTARIO.inventario=function(t){"use strict";var e=t("table#tb_inventario"),i=t("table#tb_articulos_inventario"),n=t("#nuevo_inventario"),o=(t("#frmNewInventario"),t("#btn_descargar")),a={},r=function(){t("#btn_search").on("click",function(){e.bootstrapTable("refresh")})},l=function(){t("#btn_search_articulo").on("click",function(){i.bootstrapTable("refresh")})},s=function(){var e=t.extend(!0,{},t.extend(!0,{},MPC.config).bootstrapTable);e.idField="ID_HISTORICO_BIEN",e.search=!1,e.url=Request.BaseUrl+"/inventario/principal/listArticulos",e.queryParams=function(e){return e.id_cabecera_inventario=t("#ID_CABECERA_INVENTARIO").val(),e.denominacion=t("#skills").val(),e.codigo_patrimonial=t("#codigo_patrimonial").val(),e.codigo_verificador_inventario=t("#codigo_verificador_inventario").val(),e},e.columns=[{field:"CODIGO_PATRIMONIAL_BIEN",title:"CODIGO PATRIMONIAL",align:"center",sortable:!0,width:"50px"},{field:"DENOMINACION_BEIN",title:"DENOMINACION",align:"center",sortable:!0,width:"*"},{field:"GERENCIA",title:"GERENCIA",align:"center",sortable:!0,width:"*"},{field:"RESPONSABLE",title:"RESPONSANBLE",align:"center",sortable:!0,width:"*"},{field:"CODIGO_VERIFICADOR_INVENTARIO",title:"CODIGO INVENTARIO",align:"center",sortable:!0,width:"*"},{field:"OTRAS_CARACTERISTICAS_BIEN",title:"CARACTERISTICA",align:"center",sortable:!0,width:"*"},{field:"action",title:" ACCIONES",align:"center",width:"100px",formatter:c,events:{"click .edit":I}}],e.onLoadSuccess=function(t){a=t},i.bootstrapTable(e)},c=function(t,e){var i='<button id="btn-edit-'+e.ID_HISTORICO_BIEN+'" class="btn-actions edit btn btn-xs btn-complete" data-id="'+e.ID_HISTORICO_BIEN+'" title="Editar Registro"><i class="fa fa-edit"></i></button>&nbsp;';return i},I=function(t,e,i){location.href=Request.BaseUrl+"/inventario/principal/datainventario/id/"+i.ID_HISTORICO_BIEN+"/token/"+i.TOKEN},d=function(){n.on("click",function(){t.post(Request.BaseUrl+"/inventario/principal/nuevoinventario",function(t){bootbox.dialog({closeButton:!1,message:t.layer}),u()},"json")})},u=function(){t("#btn_close").on("click",function(){bootbox.hideAll()}),t("#frmNewInventario").on("submit",function(){return t.post(Request.BaseUrl+"/inventario/principal/savenewinventario",t("#frmNewInventario").serialize(),function(i){if(i.estado===!0){e.bootstrapTable("refresh"),bootbox.hideAll();var n=[];n.message='<div class="text-center"><i class="fa fa-check"></i> Datos guardados</div>',n.style="flip",n.position="top",n.type="success",n.showClose=!0,t("body").pgNotification(n).show()}else{var n=[];n.message='<div class="text-center"><i class="fa fa-warning"></i> No se pudieron guardar los datos</div>',n.style="flip",n.position="top",n.type="danger",n.showClose=!0,t(".modal-content").pgNotification(n).show(),t("#dv_save").html('<button type="button" class="btn btn-danger" id="btn_close"><i class="fa fa-close"></i> Cancelar</button><button type="submit" class="btn btn-info" id="btn_save"><i class="fa fa-save"></i> Guardar</button>')}},"json"),!1})},b=function(){var i=t.extend(!0,{},t.extend(!0,{},MPC.config).bootstrapTable);i.idField="ID_BIEN",i.search=!1,i.url=Request.BaseUrl+"/inventario/principal/list",i.queryParams=function(e){return e.anio=t("#ANIO").val(),e},i.columns=[{field:"ID_CABECERA_INVENTARIO",title:"ID",align:"center",sortable:!0,width:"50px"},{field:"ANIO_INVENTARIO",title:"AÑO",align:"center",sortable:!0,width:"*"},{field:"FEC_INICIO_INVENTARIO",title:"FECHA INICIO",align:"center",sortable:!0,width:"*"},{field:"FEC_FIN_INVENTARIO",title:"FECHA FIN",align:"center",sortable:!0,width:"*"}],e.bootstrapTable(i)},f=function(){o.on("click",function(){var e=t("#ID_CABECERA_INVENTARIO").val();return e?void window.open(Request.BaseUrl+"/inventario/excel/exportar/id_inventario/"+e):(N("body","SELECCIONE AL MENOS UN FILTRO DE BÚSQUEDA","danger","bar"),!1)})},N=function(e,i,n,o){t(e).pgNotification({style:o,showClose:!1,message:"<center><b>"+i+"</b></center>",position:"top",timeout:3e3,type:n}).show()};return{init:function(){b(),s(),l(),r(),d(),f()}}}(window.jQuery),function(){INVENTARIO.inventario.init()}(window.jQuery);